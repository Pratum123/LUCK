<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <title>ЁЯУЛ рдХреНрд░рд┐рдпрд╛ рдЪрдпрди</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f4f6fb; padding:20px; }
    h1 { text-align:center; color:#3949ab; }

    .section { background:white; padding:20px; border-radius:12px; box-shadow:0 0 8px rgba(0,0,0,0.1); margin:20px auto; max-width:700px; }

    .fileBox {
      border:1px solid #ccc; padding:15px; border-radius:10px;
      background:#fff; margin-top:25px;
    }

    .fileItem {
      padding:12px; border-bottom:1px solid #eee;
      display:flex; align-items:center; cursor:pointer;
    }

    .fileItem:hover {
      background:#e8eaff;
    }

    .fileIcon {
      width:32px; height:32px; margin-right:10px;
    }

    .btn { width:100%; padding:16px; font-size:18px; margin:10px 0; border-radius:8px; border:none; font-weight:bold; background-color:#3949ab; color:white; cursor:pointer; }

    .info { margin-bottom:20px; font-size:18px; text-align:center; }
  </style>
</head>
<body>
<header style="background:#3949ab; color:white; padding:20px; font-size:24px; text-align:center;">
  ЁЯУШ Quiz App
</header>

  <h1>ЁЯУЛ рдХрд╛рд░реНрдп рдЪреБрдиреЗрдВ</h1>

  <div class="section">
    <div class="info">
      <strong>рдореБрдЦреНрдп рд╡рд┐рд╖рдп:</strong> <span id="showMain"></span><br>
      <strong>рдЙрдкрд╡рд┐рд╖рдп:</strong> <span id="showSub"></span>
    </div>

    <!-- UPLOAD style FILE LIST -->
    <div class="fileBox">
      <h3>ЁЯУВ JSON Files (Upload-Style List View)</h3>
      <div id="fileList">тП│ Loading...</div>
    </div>

    <button class="btn" onclick="goToQuiz('input')">тЮХ рдкреНрд░рд╢реНрди рдЬреЛрдбрд╝реЗрдВ</button>
    <button class="btn" onclick="goToQuiz('practice')">ЁЯОп рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ</button>
  </div>

<script>
  const main = localStorage.getItem("selectedMain");
  const sub = localStorage.getItem("selectedSub");

  if (!main || !sub) {
    alert("тЪая╕П рд╡рд┐рд╖рдп рдФрд░ рдЙрдкрд╡рд┐рд╖рдп рдЪрдпрди рдЖрд╡рд╢реНрдпрдХ рд╣реИ!");
    window.location.href = "index.html";
  }

  document.getElementById("showMain").textContent = main;
  document.getElementById("showSub").textContent = sub;

  function goToQuiz(mode) {
    localStorage.setItem("quizMode", mode);
    window.location.href = "quiz.html";
  }

  // ============================
  // UPLOAD STYLE LIST VIEW CODE
  // ============================

  async function loadJsonFiles() {
    try {
      const response = await fetch(`${sub}.json`);
      if (!response.ok) {
        document.getElementById("fileList").innerHTML = "тЪая╕П рдХреЛрдИ JSON рдлрд╛рдЗрд▓ рдирд╣реАрдВ рдорд┐рд▓реАред";
        return;
      }

      const jsonData = await response.json();

      let html = "";
      Object.keys(jsonData).forEach((fileName, index) => {
        html += `
          <div class="fileItem" onclick="openFile('${fileName}')">
            <img class="fileIcon" src="https://img.icons8.com/?size=40&id=59758&format=png">
            <div>
              <strong>${fileName}</strong><br>
              <small>JSON File</small>
            </div>
          </div>
        `;
      });

      document.getElementById("fileList").innerHTML = html;

    } catch (e) {
      document.getElementById("fileList").innerHTML = "тЪая╕П JSON рд▓реЛрдб рдирд╣реАрдВ рд╣реБрдЖ!";
    }
  }

  function openFile(fileName) {
    alert("ЁЯУД рдЖрдкрдиреЗ рдЦреЛрд▓рд╛: " + fileName);
    localStorage.setItem("selectedFile", fileName);
  }

  loadJsonFiles();
</script>

</body>
</html>
